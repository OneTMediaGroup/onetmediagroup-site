<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>OneT — Empire Mode</title>
<link rel="stylesheet" href="assets/css/styles.css"/>

<style>

/* ===== Album Cover ===== */
.album-hero{
  margin:30px 0;
  display:grid;
  grid-template-columns:260px 1fr;
  gap:30px;
}
@media(max-width:860px){
  .album-hero{grid-template-columns:1fr;}
}
.album-cover{
  width:100%;
  border-radius:20px;
  box-shadow:var(--shadow);
  animation:glow 4s ease-in-out infinite;
}
@keyframes glow{
  0%,100%{transform:scale(1);}
  50%{transform:scale(1.04);}
}

/* ===== Track ===== */
.track-card.playing{
  border-color:rgba(110,231,255,.7)!important;
  box-shadow:0 0 20px rgba(110,231,255,.25);
}
.track-art{
  width:150px;
  border-radius:14px;
}

/* ===== Waveform ===== */
.wave{
  display:flex;
  gap:3px;
  height:40px;
  margin-top:10px;
}
.wave span{
  flex:1;
  background:linear-gradient(180deg,var(--accent1),var(--accent2));
  border-radius:4px;
  animation:waveAnim 1.2s infinite ease-in-out;
  transform-origin:bottom;
}
.wave span:nth-child(2){animation-delay:.1s;}
.wave span:nth-child(3){animation-delay:.2s;}
.wave span:nth-child(4){animation-delay:.3s;}
.wave span:nth-child(5){animation-delay:.4s;}
.wave span:nth-child(6){animation-delay:.5s;}
.wave span:nth-child(7){animation-delay:.6s;}

@keyframes waveAnim{
  0%,100%{transform:scaleY(.3);}
  50%{transform:scaleY(1);}
}

/* ===== Mini Player ===== */
.mini-player{
  position:sticky;
  bottom:12px;
  margin-top:40px;
}
.mini-shell{
  background:rgba(11,11,15,.9);
  padding:14px;
  border-radius:18px;
  display:flex;
  gap:20px;
  align-items:center;
}
.progress-bar{
  height:8px;
  background:#222;
  border-radius:999px;
  overflow:hidden;
  cursor:pointer;
}
.progress-fill{
  height:100%;
  width:0%;
  background:linear-gradient(135deg,var(--accent1),var(--accent2));
}

.download-count{
  font-size:.8rem;
  opacity:.6;
}

.share-btn{
  font-size:.8rem;
  opacity:.8;
}

</style>
</head>

<body>
<main class="container">

<div class="album-hero">
  <img src="assets/images/Onet-Empire-Mode-Cover-V1.png" class="album-cover"/>

  <div>
    <h1>OneT — Empire Mode</h1>
    <p>Free release. Stream or download individually.</p>

    <div style="margin-top:16px;">
      <button class="btn primary" id="playAllBtn">Play All</button>
      <button class="btn" id="stopBtn">Stop</button>
    </div>
  </div>
</div>

<section id="trackList"></section>

<!-- MINI PLAYER -->
<div class="mini-player">
  <div class="mini-shell">
    <div>
      <strong id="miniTitle">Nothing Playing</strong>
      <div id="miniSub" style="font-size:.85rem;color:var(--muted);"></div>
    </div>

    <div style="flex:1;max-width:400px;">
      <div style="display:flex;justify-content:space-between;font-size:.8rem;">
        <span id="curTime">0:00</span>
        <span id="totTime">0:00</span>
      </div>
      <div class="progress-bar" id="progressBar">
        <div class="progress-fill" id="progressFill"></div>
      </div>
    </div>

    <div>
      <button id="playPauseBtn">▶︎</button>
    </div>

    <audio id="player" preload="metadata"></audio>
  </div>
</div>

</main>

<script>

const tracks=[
{num:1,title:"Empire Mode",base:"Track1–EMPIRE-MODE"},
{num:2,title:"Built From Scratch",base:"Track2–BUILT-FROM-SCRATCH"},
{num:3,title:"No Days Off",base:"Track3-No-Days-Off"},
{num:4,title:"Phase One",base:"Track4–PHASE-ONE"},
{num:5,title:"Drafts & Deadlines",base:"Track5–DRAFTS-&-DEADLINES"},
{num:6,title:"Guru Crew",base:"Track6–GURU-CREW"},
{num:7,title:"Crafted in the North",base:"Track7–CRAFTED-IN-THE-NORTH"},
{num:8,title:"Firestore Dreams",base:"Track8–FIRESTORE-DREAMS"},
{num:9,title:"Quiet Wins",base:"Track9–QUIET-WINS"},
{num:10,title:"Redbubble Revenue",base:"Track10–REDBUBBLE-REVENUE"},
{num:11,title:"Refactor",base:"Track11-REFACTOR"},
{num:12,title:"Chapter 40",base:"Track12-CHAPTER-40"},
{num:13,title:"Systems Over Hype",base:"Track13–SYSTEMS-OVER-HYPE"},
{num:14,title:"Legacy Loop",base:"Track14–LEGACY-LOOP"}
];

let currentIndex=-1;
let playAllMode=false;

const trackList=document.getElementById("trackList");
const player=document.getElementById("player");
const miniTitle=document.getElementById("miniTitle");
const miniSub=document.getElementById("miniSub");

function renderTracks(){
tracks.forEach((t,i)=>{
const count=localStorage.getItem("dl_"+t.base)||0;

const card=document.createElement("div");
card.className="card track-card";
card.id="track"+t.num;
card.innerHTML=`
<div style="display:flex;gap:20px;">
<img src="assets/images/Empire-Mode-Tack-${t.num}-Cover.png"
class="track-art"
onerror="this.style.display='none';"/>
<div style="flex:1;">
<h3>${t.num}. ${t.title}</h3>

<div style="display:flex;gap:10px;flex-wrap:wrap;">
<button class="btn primary" onclick="playTrack(${i})">Play</button>
<button class="btn" onclick="downloadTrack(${i})">⬇ Download</button>
<button class="btn share-btn" onclick="shareTrack(${i})">Share</button>
<span class="download-count">Downloads: <span id="count${t.num}">${count}</span></span>
</div>

<div class="wave" id="wave${t.num}">
<span></span><span></span><span></span><span></span><span></span><span></span><span></span>
</div>

</div>
</div>
`;
trackList.appendChild(card);
});
}

function playTrack(index){
currentIndex=index;
const t=tracks[index];
player.src=`assets/audio/${t.base}-V1.mp3`;
player.play();
miniTitle.textContent=t.title;
miniSub.textContent="Now Playing";
highlight();
}

function highlight(){
document.querySelectorAll(".track-card").forEach(c=>c.classList.remove("playing"));
if(currentIndex>=0)
document.getElementById("track"+tracks[currentIndex].num)
.classList.add("playing");
}

function downloadTrack(index){
const t=tracks[index];
const a=document.createElement("a");
a.href=`assets/audio/${t.base}-V1.mp3`;
a.download="";
document.body.appendChild(a);
a.click();
document.body.removeChild(a);

let count=Number(localStorage.getItem("dl_"+t.base)||0)+1;
localStorage.setItem("dl_"+t.base,count);
document.getElementById("count"+t.num).textContent=count;
}

function shareTrack(index){
const t=tracks[index];
const url=window.location.href+"#track"+t.num;

if(navigator.share){
navigator.share({
title:"OneT — "+t.title,
text:"Listen to "+t.title,
url:url
});
}else{
navigator.clipboard.writeText(url);
alert("Link copied!");
}
}

document.getElementById("playAllBtn").onclick=()=>{
playAllMode=true;
playTrack(0);
};

player.addEventListener("ended",()=>{
if(playAllMode && currentIndex<tracks.length-1){
playTrack(currentIndex+1);
}
});

// progress
player.addEventListener("timeupdate",()=>{
const pct=(player.currentTime/player.duration)*100;
document.getElementById("progressFill").style.width=pct+"%";
document.getElementById("curTime").textContent=
Math.floor(player.currentTime/60)+":"+
String(Math.floor(player.currentTime%60)).padStart(2,"0");
document.getElementById("totTime").textContent=
Math.floor(player.duration/60)+":"+
String(Math.floor(player.duration%60)).padStart(2,"0");
});

renderTracks();

</script>
</body>
</html>
